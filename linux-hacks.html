<!DOCTYPE html>
<html lang="english" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Linux Hacks - An Average Joe</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://akshaysin.github.io/linux-hacks.html">

        <meta name="author" content="Akshay Sinha" />
        <meta name="keywords" content="linux" />
        <meta name="description" content="Linux Hacks for day to day" />

        <meta property="og:site_name" content="An Average Joe" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Linux Hacks"/>
        <meta property="og:url" content="https://akshaysin.github.io/linux-hacks.html"/>
        <meta property="og:description" content="Linux Hacks for day to day"/>
        <meta property="article:published_time" content="2018-04-29" />
            <meta property="article:section" content="Linux Hacks" />
            <meta property="article:tag" content="linux" />
            <meta property="article:author" content="Akshay Sinha" />



    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://akshaysin.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://akshaysin.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://akshaysin.github.io/theme/css/pygments/solarizeddark.css" rel="stylesheet">
    <link rel="stylesheet" href="https://akshaysin.github.io/theme/css/style.css" type="text/css"/>





    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-2905595188512795",
    enable_page_level_ads: true
  });
</script>

</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://akshaysin.github.io/" class="navbar-brand">
An Average Joe            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="https://akshaysin.github.io/category/data-analytics.html">Data analytics</a>
                        </li>
                        <li >
                            <a href="https://akshaysin.github.io/category/devops.html">Devops</a>
                        </li>
                        <li class="active">
                            <a href="https://akshaysin.github.io/category/linux-hacks.html">Linux hacks</a>
                        </li>
                        <li >
                            <a href="https://akshaysin.github.io/category/python.html">Python</a>
                        </li>
                        <li >
                            <a href="https://akshaysin.github.io/category/various.html">Various</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<!-- Banner -->
<!-- End Banner -->

<!-- Content Container -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://akshaysin.github.io/linux-hacks.html"
                       rel="bookmark"
                       title="Permalink to Linux Hacks">
                        Linux Hacks
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-04-29T17:27:00-05:00"> Sun 29 April 2018</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://akshaysin.github.io/tag/linux.html">linux</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <h2>Linux Hacks</h2>
<p>Here is a goto list of linux hacks that I find useful in my day to day. I will keep on updating it as I gather more. Please feel free to respond back in comments in case you want me to add some more</p>
<h3>Random Password Generator</h3>
<p>Following two scripts generate a random string, a sub set of which, or the whole string can be used as an password. Give it a try.</p>
<pre><code>date +%s | sha256sum | base64 | head -c 32 ; echo
</code></pre>
<h3>Removing trailing spaces</h3>
<pre><code>echo "   lol  " | xargs
</code></pre>
<p>Xargs will do the trimming for you. It's one command/program, no parameters, returns the trimmed string, as easy as that!
Note: this doesn't remove the internal spaces so "foo bar" stays the same. It does NOT become "foobar".</p>
<h3>Breaking a file into smaller chunks</h3>
<pre><code># By Size
split -b 100M -d -a 3 forever.log.bck forever

# By number of Lines (input and output are just two directories)
split -l 2500 input/result.txt output/result.txt
</code></pre>
<h3>Search and replace a string in all files in my present directory</h3>
<pre><code>sed -i -- 's/STR1/STR2/g' *
</code></pre>
<p>This replaces all occurances of <em>STR1</em> with <em>STR2</em> in all files in my current directory</p>
<h3>Delete logs older than X days</h3>
<pre><code>find /path/to/files* -mtime +X -exec rm {} \;
</code></pre>
<h3>Total number of lines in all the files in current directory</h3>
<pre><code>find . -type f -exec cat {} + | wc -l
</code></pre>
<h3>Install FTP on rhel or centos</h3>
<pre><code>yum install vsftpd -y
yum install ftp -y
service vsftpd start
</code></pre>
<h3>Install jq</h3>
<p><a href="https://stedolan.github.io/jq/">jq</a> is a really cool tool if you work with json's a lot. Its like sed for json. You can use it to slice and filter and map and transform structured data with the same ease that sed, awk, grep and friends let you play with text.</p>
<p>Installing it is an breeze too</p>
<pre><code>wget -O jq https://github.com/stedolan/jq/releases/download/jq-1.5/jq-linux64
chmod +x ./jq
cp jq /usr/bin
rm jq
</code></pre>
<h3>Using tcpdump</h3>
<p>Although a whole seperate blog could be ritten about tcpdump and its usage. Here is a very short, quick and dirty SOP to get it up and running
Please note that sudo access is required for this</p>
<p><strong>Install tcpdump</strong></p>
<pre><code>yum install tcpdump
</code></pre>
<p><strong>Script to capture network traffic on a port and write a Wireshark-compatible pcap file</strong></p>
<pre><code># Use tcpdump to capture network traffic and write a Wireshark-compatible pcap file:
tcpdump -s 0 port 443 -w mypcapfile.pcap

# Terminate the capture with a ctl-c

# gzip the file:
gzip mypcapfile.pcap
</code></pre>
<p><strong>Capture traffic on particular interface</strong></p>
<pre><code>tcpdump -i eth0
</code></pre>
<p><strong>Display Available Interfaces</strong></p>
<pre><code>tcpdump -D
</code></pre>
<p><strong>Read Captured Packets File</strong></p>
<pre><code>tcpdump -r mypcapfile.pcap
</code></pre>
<p><strong>Capture Packets from source IP</strong></p>
<pre><code>tcpdump -i eth0 src 172.176.98.1
</code></pre>
<p><strong>Capture Packets from destination IP</strong></p>
<pre><code>tcpdump -i eth0 dst 172.176.98.1
</code></pre>
<h3>Adding a Script to auto start on reboot/startup</h3>
<p>At times, you need a way to make a script auto start at the time of reboot's ans startup. There are multiple ways to accomplish this. </p>
<p>However the one I find most effective is :</p>
<ul>
<li>
<p>First create a init.d script for your operation that supports <code>start|stop|restart</code> operations. For example, here is a sample <code>init.d</code> script to start/stop ldap</p>
<pre><code>#!/bin/sh
# ldap          Init script for running the ldap client daemon
#
# Author:       Akshay Sinha &lt;akshaysin@gmail.com&gt;
#
# chkconfig: - 63 37
#
# description: Start's Stops ldap.
# processname: ldap
# config: /opt/IBM/ldap/V6.3.1/sbin/ibmslapd

#
# Below is the chkconfig syntax for auto startup at different run levels
# Note runlevel 1 2 and 3, 69 is the Start order and 68 is the Stop order
# Make sure these are unique by looking into /etc/rc.d/*
# Also below is the description which is necessary.
#
# chkconfig: 123 63 37
# description: Description of the Service
#
# Below is the source function library
#
. /etc/init.d/functions
#
#
# Below is the Script to start stop ldap services
#
case "$1" in
start)
printf "Starting service : LDAP\n"
curl --output /dev/null --silent --head --fail ldap://localhost:389
if [[ $? -eq 0 ]]; then
    printf "LDAP already running. Doing nothing\n"
else
    /opt/IBM/ldap/V6.3.1/sbin/ibmslapd -I isamldap
fi
;;
stop)
printf "Stopping service : LDAP\n"
curl --output /dev/null --silent --head --fail ldap://localhost:389
if [[ $? -eq 0  ]]; then
    /opt/IBM/ldap/V6.3.1/sbin/ibmslapd -I isamldap -k
    printf "LDAP Stopped gracefully\n"
else
    printf "LDAP Already stopped. Doing nothing\n"
fi
;;
restart)
printf "Restarting service : LDAP\n"
curl --output /dev/null --silent --head --fail ldap://localhost:389
if [[ $? -eq 0 ]]; then
    /opt/IBM/ldap/V6.3.1/sbin/ibmslapd -I isamldap -k
    printf "LDAP Stopped gracefully. Starting it now\n"
    sleep 2
    /opt/IBM/ldap/V6.3.1/sbin/ibmslapd -I isamldap
else
    printf "LDAP Already stopped. Starting it now\n"
    /opt/IBM/ldap/V6.3.1/sbin/ibmslapd -I isamldap
fi
;;
*)
printf "Usage: $0 {start|stop|restart}"
exit 1
;;
esac
</code></pre>
</li>
<li>
<p>Next run the <code>chkconfig --list</code> command to list all current run levels for different programs</p>
</li>
<li>Run <code>chkconfig --list ldap</code></li>
<li>Run <code>chkconfig ldap on</code></li>
<li>Run <code>chkconfig --list ldap</code> again</li>
</ul>
<p>That's it. </p>
            </div>
            <!-- /.entry-content -->
    <hr />
    <!-- AddThis Button BEGIN -->
    <div class="addthis_toolbox addthis_default_style">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    </div>
    <!-- AddThis Button END -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'an-average-joe'; // required: replace example with your forum shortname

                    var disqus_identifier = 'linux-hacks';
                var disqus_url = 'https://akshaysin.github.io/linux-hacks.html';

            var disqus_config = function () {
                this.language = "english";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<div id="aboutme">
        <p>
            <img width="100%" class="img-thumbnail" src="https://akshaysin.github.io/images/akshay.jpg"/>
        </p>
    <p>
      <strong>About Akshay Sinha</strong><br/>
        A confused coder.
    </p>
</div><!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Social -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
  <ul class="list-group" id="social">
    <li class="list-group-item"><a href="https://www.linkedin.com/in/akshay-sinha-91215954"><i class="fa fa-linkedin-square fa-lg"></i> linkedin</a></li>
    <li class="list-group-item"><a href="https://github.com/akshaysin"><i class="fa fa-github-square fa-lg"></i> github</a></li>
  </ul>
</li>
<!-- End Sidebar/Social -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="https://uptowork.com/mycv/akshaysinha" target="_blank">Resume</a>
    </li>
    <li class="list-group-item">
      <a href="https://spamty.eu/mail/v4/830/2RWUyWci8Q2f55cff1/" target="_blank">Email</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->

<!-- Sidebar/Archive -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Archive</span></h4>
  <ul class="list-group" id="archive">
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Sep/index.html"><i class="fa fa-calendar fa-lg"></i>September 2018 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Aug/index.html"><i class="fa fa-calendar fa-lg"></i>August 2018 (5)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Jul/index.html"><i class="fa fa-calendar fa-lg"></i>July 2018 (2)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Jun/index.html"><i class="fa fa-calendar fa-lg"></i>June 2018 (4)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/May/index.html"><i class="fa fa-calendar fa-lg"></i>May 2018 (1)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Apr/index.html"><i class="fa fa-calendar fa-lg"></i>April 2018 (8)
          </a>
        </li>
        <li class="list-group-item">
          <a href="https://akshaysin.github.io/posts/2018/Mar/index.html"><i class="fa fa-calendar fa-lg"></i>March 2018 (5)
          </a>
        </li>
  </ul>
</li>
<!-- End Sidebar/Archive -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<!-- End Content Container -->

<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2018 Akshay Sinha
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://akshaysin.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://akshaysin.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://akshaysin.github.io/theme/js/respond.min.js"></script>


    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'an-average-joe'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics Universal -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-118879797-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics Universal Code -->


        <script type="text/javascript">var addthis_config = {"data_track_addressbar": true};</script>
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5adbce4fc80f08db"></script>
    <script>
           $(document).ready(function () {
              $("table").attr("class","table table-condensed table-bordered");
           });
    </script>
</body>
</html>